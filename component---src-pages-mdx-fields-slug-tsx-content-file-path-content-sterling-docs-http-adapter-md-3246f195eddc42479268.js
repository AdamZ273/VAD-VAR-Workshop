"use strict";(self.webpackChunkvad_var=self.webpackChunkvad_var||[]).push([[84],{8791:function(e,t,n){n.r(t),n.d(t,{Head:function(){return d},default:function(){return p}});var l=n(1151),a=n(7294);function r(e){const t=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2",a:"a",ol:"ol",li:"li",strong:"strong",img:"img",blockquote:"blockquote",pre:"pre"},(0,l.ah)(),e.components),{SubHeader:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("SubHeader",!0),a.createElement(a.Fragment,null,a.createElement(t.h1,{id:"bonus---configure-a-secured-http-endpoint"},"Bonus - Configure a secured HTTP endpoint"),"\n",a.createElement(n,{timeToComplete:e.pageContext.frontmatter.timeToComplete,updated:e.pageContext.frontmatter.updated}),"\n",a.createElement(t.p,null,"In this activity, you will learn more about how services and adapters can be configured in Sterling B2B Integrator. Like the Configuration Part 1 activity, since the steps in this lab will deploy a new service in the cluster, the first section where the service is configured will be performed once per cluster."),"\n",a.createElement(t.p,null,"For the last section, each lab user could configure their own route in the ",a.createElement(t.code,null,"b2bi")," project if desired."),"\n",a.createElement(t.h2,{id:"add-a-http-service-adapter"},a.createElement(t.a,{href:"#add-a-http-service-adapter"},"Add a HTTP Service Adapter")),"\n",a.createElement(t.p,null,"Sterling B2B Integrator includes a number of pre-installed adapters that can be configured to send and receive data. To make this section a little different from Configuration Part 1, instead of configuring the HTTP Service Adapter for the ASI (application server-independent) node, it will be configured on the Adapter Container (AC) node. The AC node is a supplemental node to the ASI and allows Service Adapters to be distributed off the ASI."),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Return to the OpenShift ",a.createElement(t.strong,null,"Routes")," list and open the ",a.createElement(t.strong,null,"sterling-fg-b2bi-asi-internal-route-dashboard")," route. When prompted, log in using the ",a.createElement(t.strong,null,"admin")," user. Then expand ",a.createElement(t.strong,null,"Deployment")," -> ",a.createElement(t.strong,null,"Services")," and click on ",a.createElement(t.strong,null,"Configuration"),"."),"\n",a.createElement(t.img,{src:"/0ecb3488f20b0fbdf36adbd9a9fca4aa/HSA_ServiceConfigMenu.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Type ",a.createElement(t.strong,null,"HTTP Server Adapter")," for the Service Name in the Search panel and click on ",a.createElement(t.strong,null,"Go!"),"."),"\n",a.createElement(t.img,{src:"/4d51f8aa47523617fb166fa2545bf6a3/HSA_ServiceSearch.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Find the row with ",a.createElement(t.strong,null,"Http Server Adapter")," in the name column and click on the ",a.createElement(t.strong,null,"copy")," text/icon."),"\n",a.createElement(t.img,{src:"/be0df240b4d4804d7cc9bb56bd1a545b/HSA_ServiceCopy.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Change the name to ",a.createElement(t.strong,null,"AC Hosted Authenticating Http Server Adapter"),", scroll in the ",a.createElement(t.strong,null,"Environment")," panel to select the ",a.createElement(t.strong,null,"node 1 Adapter Container1")," resource. Then, click on ",a.createElement(t.strong,null,"Next"),"."),"\n",a.createElement(t.img,{src:"/32459c87411244a2337cff8ff3b2bbc8/HSA_ServiceConfigName.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"To find a port to use for the Http Server Adapter instance, go back to the OpenShift console and the ",a.createElement(t.strong,null,"Services")," list. This time, select the ",a.createElement(t.strong,null,"sterling-fg-b2bi-ac-backend-svc")," service and note the port used for the ",a.createElement(t.code,null,"adapters-2")," Service port."),"\n",a.createElement(t.img,{src:"/0ada7c74c420959602276ebe7b360a9e/HSA_OCPACBackendSvcPort.png",alt:"image"}),"\n",a.createElement(t.p,null,"Notice that the Kubernetes service and the node port are identical. Techincally, they do not need to match. The important part to note is the port number associated with the service, or the pod port if given. Since the pod port name matches the service port mapping name, the correct port to choose is ",a.createElement(t.code,null,"30352"),"."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Enter the port from the service in for the ",a.createElement(t.strong,null,"HTTP Listen Port"),", change ",a.createElement(t.strong,null,"User Authentication Required")," to ",a.createElement(t.strong,null,"Yes"),". Then, click on ",a.createElement(t.strong,null,"Next"),"."),"\n",a.createElement(t.img,{src:"/472da67c7a51cdf80eaf4ddc962ecba2/HSA_ServiceConfigPort.png",alt:"image"}),"\n",a.createElement(t.blockquote,null,"\n",a.createElement(t.p,null,"There is a warning on this page that not enabling SSL would result in a weak security configuration. This is generally true, but we will mitigate the security exposure of credentials going over the Internet in cleartext when we create the ",a.createElement(t.strong,null,"Route")," to expose the service using OpenShift."),"\n"),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Review the option to specify a particular group for access to the service, but do not make changes. Click on ",a.createElement(t.strong,null,"Save"),"."),"\n",a.createElement(t.img,{src:"/0765bce77d71096ea02c264d92bb9a62/HSA_ServiceConfigGroup.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"In the confirmation page, scroll down to find the ",a.createElement(t.strong,null,"URI: /hello")," entry. Notice that the Business Process to run is called ",a.createElement(t.strong,null,"Hello World")),"\n",a.createElement(t.img,{src:"/85ea4a5d48b2e1f35bf3adc68d46e088/HSA_ServiceCheckBP.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Continue scrolling to the bottom of the confirmation page and click on ",a.createElement(t.strong,null,"Finish"),"."),"\n",a.createElement(t.img,{src:"/44a883f8db47fdfe81fd18584f9586b3/HSA_ServiceCheckFinish.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click on ",a.createElement(t.strong,null,"Return")," to go back to the Services Configuration panel."),"\n",a.createElement(t.img,{src:"/eb019c9a6ac1a9d187879e371736045a/HSA_ServiceConfigReturn.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Check the status of the new adapter. Using ",a.createElement(t.strong,null,"Select Node"),", change to ",a.createElement(t.strong,null,"node1AC1"),"."),"\n",a.createElement(t.img,{src:"/e910d70b3381f611d3aa91b16ebb62d7/HSA_ServiceListAC1.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click on the exclamation mark for the service adapter to check the running status (it will be automatically enabled since it was copied from an enabled service adapter)."),"\n",a.createElement(t.img,{src:"/4355cfdeeb85cc688ea9f69d07796f0f/HSA_ServiceCheckAC1.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Note the progression in timestamps ending with ",a.createElement(t.strong,null,"REGISTER_JNDI"),", this shows the service adapter is operating. Click on ",a.createElement(t.strong,null,"CLOSE")," in the upper right to dismiss the panel."),"\n"),"\n"),"\n",a.createElement(t.h2,{id:"explore-the-sample-business-process"},a.createElement(t.a,{href:"#explore-the-sample-business-process"},"Explore the sample Business Process")),"\n",a.createElement(t.p,null,"Before configuring an OpenShift Route to access the service, spend a moment reviewing the sample Business Process that will be invoked when the ",a.createElement(t.code,null,"/hello")," endpoint is accessed."),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"On the main B2Bi left navigation, expand ",a.createElement(t.strong,null,"Business Process")," -> ",a.createElement(t.strong,null,"Manager"),". Then, type ",a.createElement(t.strong,null,"Hello World")," as the Process Name in the Search panel. Finally, click on ",a.createElement(t.strong,null,"Go!"),"."),"\n",a.createElement(t.img,{src:"/a011fe8ff1c51741735747d1830eaa0e/HSA_BPSearch.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click on the Process Name to open a view of the process."),"\n",a.createElement(t.img,{src:"/e7be685b6d104a74433192e2380fa45d/HSA_BPOpen.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Expand the window so that the full business process is shown."),"\n",a.createElement(t.img,{src:"/de91a840f3792da7d742a1148f5c2072/HSA_BPHelloWorld.png",alt:"image"}),"\n",a.createElement(t.p,null,"Without getting too technical, it is clear to see that the sequence of this business process has three operations. The first operation generates a xml document with a data element containing ",a.createElement(t.code,null,"Hello World!"),'. The second operation invokes an XSL Transformation using a stylesheet called "HelloWorld". If you were to look up this XSL stylesheet in the B2Bi dashboard you would see that it takes the data from the xml document and wraps it with some basic html tags. The last operation creates a http response sending the data from the XSL Transformation. In effect, when this business process is invoked it will generate a response like this to the caller:'),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-html"},"<html>\n  <body>\n    Hello World!\n  </body>\n</html>\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Close the view of the business process by clicking on ",a.createElement(t.strong,null,"CLOSE")," in either the upper right or lower right corner."),"\n",a.createElement(t.img,{src:"/6ac9d81717f62f94e1e434f74797106c/HSA_BPHelloWorldClose.png",alt:"image"}),"\n"),"\n"),"\n",a.createElement(t.h2,{id:"configure-an-openshift-route-to-expose-the-http-service-adapter-and-its-endpoints"},a.createElement(t.a,{href:"#configure-an-openshift-route-to-expose-the-http-service-adapter-and-its-endpoints"},"Configure an OpenShift Route to expose the HTTP Service Adapter and its endpoints")),"\n",a.createElement(t.p,null,"Red Hat OpenShift has a resource type called a ",a.createElement(t.code,null,"Route")," that is very similar to the Kubernetes ",a.createElement(t.code,null,"ingress")," resource. In OpenShift, routes allow the cluster (or project) administrator to expose a service in the project for access over http or https. When creating a route that implements https, there are three options that can be selected; ",a.createElement(t.strong,null,"edge"),", ",a.createElement(t.strong,null,"reencrypt"),", and ",a.createElement(t.strong,null,"passthrough"),". For the sake of simplicity, this lab will use an ",a.createElement(t.strong,null,"edge")," route to securely terminate the inbound connection on a routing pod in the cluster."),"\n",a.createElement(t.p,null,"As was done earlier in the lab, if you are working in a multi-tenant environment, the route that you create should be made unique by prefixing the name with your initials in lower case with a ",a.createElement(t.code,null,"-")," immediately after."),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Switch back to the OpenShift console and go to the ",a.createElement(t.strong,null,"Routes")," panel with the ",a.createElement(t.strong,null,"b2bi")," project selected. Then, click on the ",a.createElement(t.strong,null,"Create Route")," button."),"\n",a.createElement(t.img,{src:"/b858ee9426a0658776ad58f37f9cf946/HSA_CreateRoute.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"For then name of the route, use the base name of ",a.createElement(t.code,null,"auth-helloworld"),". If you are working in a group, place your initials followed by a dash before this name. Following the example from the earlier lab, Bilbo Baggins would enter ",a.createElement(t.code,null,"bb-auth-helloworld"),"."),"\n",a.createElement(t.img,{src:"/ee813ce7ceacdfd3fc1fb1c7330a574c/HSA_RouteName.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"For the hostname, place this name to the left of the cluster apps domain name in the browser URL, leaving off any path elements. For example for this console url:"),"\n",a.createElement(t.img,{src:"/07a3a6177b15a4bb2ae52a3e0d7cf39c/HSA_OCPAppsDomain.png",alt:"image"}),"\n",a.createElement(t.p,null,"Bilbo would use the ",a.createElement(t.strong,null,"Hostname")," of ",a.createElement(t.code,null,"bb-auth-helloworld.apps.ocp-100000gsew-sqwx.cloud.techzone.ibm.com")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Keep the ",a.createElement(t.strong,null,"Path")," as the default and for ",a.createElement(t.strong,null,"Service"),", select ",a.createElement(t.strong,null,"sterling-fg-b2bi-ac-backend-svc"),". For the ",a.createElement(t.strong,null,"Target Port")," select ",a.createElement(t.strong,null,"30352 -> adapters-2 (TCP)"),"."),"\n",a.createElement(t.img,{src:"/a62c7a97657e128d4ff552bd6cf10f60/HSA_RouteServicePort.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Select the checkbox next to ",a.createElement(t.strong,null,"Secure Route")," and select ",a.createElement(t.strong,null,"Edge")," from the ",a.createElement(t.strong,null,"TLS termination")," pulldown."),"\n",a.createElement(t.img,{src:"/aa097ab6d74309f54638f72a60e71b2a/HSA_RouteTLS.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"The remaining parts of the form for ",a.createElement(t.strong,null,"Insecure traffic")," and ",a.createElement(t.strong,null,"Certificates")," may be left at their default. Click on the ",a.createElement(t.strong,null,"Create")," button to create the route."),"\n",a.createElement(t.img,{src:"/511d5175444824675da35ce92f420ec1/HSA_RouteConfirm.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"OpenShift will display a status page with the newly created ",a.createElement(t.strong,null,"Location")," shown. Copy the URL."),"\n",a.createElement(t.img,{src:"/bbb5a8b01f87d58650fe602c888610a2/HSA_RouteCreated.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Open a new browser tab and paste the URL and append ",a.createElement(t.code,null,"/hello")," as the endpoint."),"\n",a.createElement(t.img,{src:"/ae9fc3584e6c1b6b31c746a44fd5660e/HSA_HostWithPath.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"In the dialog, enter in the username and password for one of the trading partners created in the earlier lab and click on ",a.createElement(t.strong,null,"Sign In"),"."),"\n",a.createElement(t.img,{src:"/26da4043e10b9efddaa42780689d67ab/HSA_BasicAuth.png",alt:"image"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"The expected response is provided back from the business process."),"\n",a.createElement(t.img,{src:"/4d4928d2c4a24a4b8d285f1b9a0f3a61/HSA_HelloWorld.png",alt:"image"}),"\n"),"\n"),"\n",a.createElement(t.h2,{id:"summary"},a.createElement(t.a,{href:"#summary"},"Summary")),"\n",a.createElement(t.p,null,"In this activity, another protocol adapter was added to the B2B Integrator environment. In addition to the very simple HelloWorld business process, this adapter also supports a large number of other relevant business processes for B2B integration scenarios and can be customized as needed for business requirements."),"\n",a.createElement(t.p,null,"When the HTTP Service Adapter was configured, it was set to match a port defined in a Kubernetes ",a.createElement(t.strong,null,"Service"),". This made it very simple to expose the HTTP Service Adapter securely on the OpenShift cluster using a Route. Note that in this simplified example, there was no grouping of access set with the HTTP Service Adapter. This means that any valid trading partner username and password would work for authentication. In a production environment, further organization around group-based access would be common."))}var o=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,l.ah)(),e.components);return t?a.createElement(t,e,a.createElement(r,e)):r(e)};var c=n(7315),i=n(2125),s=n(1753),m=n(4690);const u={table:s.y6,a:s.IW,blockquote:s.R4,SubHeader:s.bU,img:s.fb},h=e=>{const{data:{mdx:{tableOfContents:{items:t},frontmatter:{toc:n=!0}}},children:r}=e,o=(0,a.useRef)(null),{0:s,1:m}=(0,a.useState)("");return(0,a.useEffect)((()=>{if(!o.current)return;const e=o.current.querySelectorAll("h2,h3,h4,h5"),t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&m(e.target.id)}))}),{rootMargin:"0px 0px -95% 0px",threshold:0});return e.forEach((e=>{t.observe(e)})),()=>t.disconnect()}),[]),a.createElement(a.Fragment,null,a.createElement("article",{className:c.Y,ref:o},a.createElement(l.Zo,{components:{...u}},r)),(null===n||n)&&t&&a.createElement(i.Z,{itemsList:t,maxDepth:1,currSection:s}))},d=e=>{const{location:{pathname:t},data:{mdx:{frontmatter:{title:n},tableOfContents:{items:l}}}}=e;return a.createElement(m.Z,{pathname:t,title:n||l[0].title||void 0})};function p(e){return a.createElement(h,e,a.createElement(o,e))}}}]);
//# sourceMappingURL=component---src-pages-mdx-fields-slug-tsx-content-file-path-content-sterling-docs-http-adapter-md-3246f195eddc42479268.js.map