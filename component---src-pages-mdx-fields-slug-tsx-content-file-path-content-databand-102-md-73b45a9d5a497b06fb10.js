"use strict";(self.webpackChunkvad_var_site=self.webpackChunkvad_var_site||[]).push([[6538],{8300:function(e,t,n){n.r(t),n.d(t,{Head:function(){return E},default:function(){return f}});var l=n(1151),a=n(7294);function r(e){const t=Object.assign({h1:"h1",h2:"h2",a:"a",ol:"ol",li:"li",p:"p",strong:"strong",img:"img",ul:"ul"},(0,l.ah)(),e.components),{SubHeader:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("SubHeader",!0),a.createElement(a.Fragment,null,a.createElement(t.h1,{id:"102--observing-jobs-configuring-alerts-and-external-notifications"},"102:  Observing jobs, Configuring Alerts and External Notifications"),"\n",a.createElement(n,{timeToComplete:e.pageContext.frontmatter.timeToComplete,updated:e.pageContext.frontmatter.updated}),"\n",a.createElement(t.h2,{id:"observing-a-job-in-databand"},a.createElement(t.a,{href:"#observing-a-job-in-databand"},"Observing a job in Databand")),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Return to the browser tab with CP4DaaS. Open the Multicloud Data Integration flow (if not there), and click the ",a.createElement(t.strong,null,"Run")," button at the top."),"\n",a.createElement(t.p,null,a.createElement(t.img,{src:"/1684146509618.2117862117/run-job.png",alt:"run job"}),"\nThe job may take a few minutes to run. Upon completion, you will see a green ",a.createElement(t.strong,null,"Run successful with warnings")," banner at the top. Once you see this, switch back to the Databand tab."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"On the left-hand menu, select the ",a.createElement(t.strong,null,"Pipelines")," tab. You can identify your specific DataStage job / ETL (extract, transform, load) pipeline by looking at the ",a.createElement(t.strong,null,"Project")," column on this page, which displays the project name of your DataStage environment."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click on the ",a.createElement(t.strong,null,"Name")," column of your specific project (for example, ",a.createElement(t.strong,null,"Databand_mk"),")"),"\n",a.createElement(t.p,null,a.createElement(t.img,{src:"/1684146509646.2124862124/select-job.png",alt:"select job"}),"\n",a.createElement(t.strong,null,"QUICK TIP:")," You can quickly search for your specific DataStage job by clicking the ",a.createElement(t.strong,null,"Project")," dropdown and typing in your CP4DaaS project name in the search bar.  See the screenshot below for an example of this search function."),"\n",a.createElement(t.img,{src:"/1684146509610.2114862114/project-search.png",alt:"project search"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"The new screen that pops up will be the Run list of each of the ETL pipeline (DataStage job) runs. This page displays the sequential list of runs for the DataStage job, the status of those runs, start and end time, alerts, errors, the number of successful/failed tasks, and the duration of those tasks."),"\n",a.createElement(t.p,null,"You only ran this DataStage job once, so only one run will show. However, as you continue to run jobs throughout this lab, you will see this page fill up with each sequential run."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"On this same screen, click on the ",a.createElement(t.strong,null,"Run name")," for this specific job run."),"\n",a.createElement(t.img,{src:"/1684146509574.2104862105/click-run-name.png",alt:"click run name"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Resize the window pane showing the pipeline so you can see the entire flow by dragging the arrow pointing left to the left-hand side of the screen."),"\n",a.createElement(t.p,null,a.createElement(t.img,{src:"/1684146509618.2117862116/resize-dag.png",alt:"resize dag"}),"\nThe screen will look like the screenshot below. You may have to drag and zoom the screen to center the job."),"\n",a.createElement(t.p,null,a.createElement(t.img,{src:"/1684146509602.2112862112/job-flow.png",alt:"job flow"}),"\n",a.createElement(t.strong,null,"NOTE:")," For large, complex jobs you can use a navigator window in the bottom right to scroll over the job. This is the ",a.createElement(t.strong,null,"Toggle Minimap")," icon on the right."),"\n",a.createElement(t.img,{src:"/1684146509674.2131862130/toggle-minimap.png",alt:"toggle-minimap"}),"\n",a.createElement(t.p,null,"Databand shows a graphical representation of the DataStage job. Note that each stage is green, which means it ran successfully. Each individual stage contains the name of that stage, and a timestamp of how long it took each stage to run. Additionally, the top of this view shows the total time it took this job to run."),"\n",a.createElement(t.p,null,a.createElement(t.strong,null,"NOTE:")," These stages can run in parallel, and thus, the sum total of the time of each individual stage shown is likely much larger than the total time to run the job."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Next, click on the ",a.createElement(t.strong,null,"MORTGAGE_APPLICANTS")," stage."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Select the ",a.createElement(t.strong,null,"Logs")," tab on the top menu. Resize the view like you did earlier to see  more of the log for the selected stage."),"\n",a.createElement(t.img,{src:"/1684146509670.2131862129/stage-logs.png",alt:"stage logs"}),"\n",a.createElement(t.p,null,"This view will show us the logs associated with that specific stage. Feel free to click on other stages to view those logs as well."),"\n",a.createElement(t.p,null,"At this point, you have looked through some of the “step-through” functionality that Databand brings to observing our DataStage jobs. Switch back to the browser tab hosting your DataStage environment and run the job ",a.createElement(t.strong,null,"4 more times")," to generate more metrics and set some baselines for our Databand environment. This will make sense as we continue our lab and will simulate what a customer environment would look like where a job would run many times."),"\n"),"\n"),"\n",a.createElement(t.h2,{id:"testing-job-alerts-in-databand"},a.createElement(t.a,{href:"#testing-job-alerts-in-databand"},"Testing job alerts in Databand")),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"After running the Multicloud Data Integration job four more times (you’ve now run this job a total of five times), go back to your Databand environment. Select the ",a.createElement(t.strong,null,"Pipelines")," tab on the left-hand menu, find your pipeline, drill into it, and take note of the ",a.createElement(t.strong,null,"Run list")," tab on the top menu."),"\n",a.createElement(t.img,{src:"/1684146509622.2117862118/run-list.png",alt:"run list"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Select the ",a.createElement(t.strong,null,"Metrics")," tab on the top menu. The default metric shown is the ",a.createElement(t.strong,null,"Duration")," of each run."),"\n",a.createElement(t.p,null,a.createElement(t.img,{src:"/1684146509626.212862119/run-metrics.png",alt:"run metrics"}),"\n",a.createElement(t.strong,null,"NOTE:")," You can also observe other metrics of the DataStage job; for example, rows being written to and read from each stage. This is outside the scope of this lab."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Now it’s time to create your first alert. Click the purple ",a.createElement(t.strong,null,"Add Alert")," button in the top right corner of your screen."),"\n",a.createElement(t.p,null,a.createElement(t.img,{src:"/1684146509562.21862102/add-alert.png",alt:"add alert"}),"\nThe first step in creating a Databand alert is to create the “Alert definition”. This is the logic behind your alert. Look at all the alert possibilities you can create within Databand. You can create an alert based on run metrics for your DataStage job such as successful or failure, run duration, specific task durations, missing data operations, and schema changes."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Since these jobs take around 2 or 3 minutes to run, you will create an alert if your job takes greater than 4 minutes. To create this alert, click the ",a.createElement(t.strong,null,"Set up")," button in the ",a.createElement(t.strong,null,"Pipeline duration")," tile."),"\n",a.createElement(t.img,{src:"/1684146509610.2114862113/pipeline-duration.png",alt:"pipeline duration"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click on the ",a.createElement(t.strong,null,"Operator")," dropdown and select the ",a.createElement(t.strong,null,"greater than")," option. Note the other operators listed here, including ",a.createElement(t.strong,null,"Percentage deviation")," and ",a.createElement(t.strong,null,"Anomaly"),"."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Enter ",a.createElement(t.strong,null,"240")," in the ",a.createElement(t.strong,null,"Duration")," box, which accepts seconds as input, to designate the time of 4 minutes."),"\n",a.createElement(t.img,{src:"/1684146509598.2112862111/gt-4mins.png",alt:"gt 4mins"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Scroll down to the ",a.createElement(t.strong,null,"Additional settings")," section and click on the ",a.createElement(t.strong,null,"Low")," box listed under the ",a.createElement(t.strong,null,"Alert severity")," section. This will alert the assigned individual group on how important this specific alert is. Since this alert will fire if a job is running slightly slower than normal, mark it as low severity."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Give this alert a name titled ",a.createElement(t.strong,null,"Slow running job <YOUR_INITIALS>")," (for example, Slow running job AB)."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Make sure the logic of your alert definition matches the screenshots above, then click ",a.createElement(t.strong,null,"Save alert"),"."),"\n",a.createElement(t.img,{src:"/1684146509630.212862120/save-duration-alert.png",alt:"save duration alert"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"The next screen allows you to assign this alert to a receiver, which is a user or group of users that will be notified of this alert through Slack, email, or PagerDuty (this part is covered in the next portion of the lab.) For now, keep the alert within Databand. Click the ",a.createElement(t.strong,null,"Done")," button."),"\n",a.createElement(t.img,{src:"/1684146509586.2107862107/confirm-duration-alert.png",alt:"confirm duration alert"}),"\n"),"\n"),"\n",a.createElement(t.p,null,"Take note of how helpful such alerting can be for monitoring the success, failure, and overall performance of our DataStage jobs."),"\n",a.createElement(t.h2,{id:"alerting-based-on-data-interactions"},a.createElement(t.a,{href:"#alerting-based-on-data-interactions"},"Alerting based on data interactions")),"\n",a.createElement(t.p,null,"For the final portion of this lab, you will view the data interactions of your job and create an alert based on those interactions. This is one of the key value-adds of integrating Databand with your DataStage environment, as you can now alert users in near-real-time on many custom failures, job changes, delays, and much more."),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"If you are not already at the Run list page, return to the Run list tab by selecting Run list in the top menu bar."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click into the top (first) Run Name."),"\n",a.createElement(t.img,{src:"/1684146509650.2126862125/select-run.png",alt:"select run"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Select the ",a.createElement(t.strong,null,"Data Interactions")," tab in the top menu. Use the resizer to focus on the left-hand side of the screen."),"\n",a.createElement(t.p,null,a.createElement(t.img,{src:"/1684146509590.211862108/data-interactions.png",alt:"data interactions"}),"\nYou can see the inputs and outputs (reads/writes) of the records and columns in each respective stage. You can see the source type, associated datasets, any issues that may have come up, information on the schema and records, and the associated stage. The total of these records is represented in the chart at the top of the screen. The chart at the top titled ",a.createElement(t.strong,null,"Runs record history (all tasks)")," as well as the column titled ",a.createElement(t.strong,null,"History Trend")," gives the user a view of the job’s historical performance."),"\n",a.createElement(t.p,null,a.createElement(t.img,{src:"/1684146509614.2114862115/record-history.png",alt:"record history"}),"\n",a.createElement(t.strong,null,"NOTE:")," You can also use the ",a.createElement(t.strong,null,"Data Interactions")," tab for each individual stage, such as in the screenshot below. By clicking on the specific transformation, you can see information such as the schema, the row count, and the historical trend of that row count."),"\n",a.createElement(t.img,{src:"/1684146509594.211862110/filterstate-task.png",alt:"filterstate task"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"You will now create an alert around a schema change. Select the ",a.createElement(t.strong,null,"Alerts")," tab on the left-hand menu. This is where all Databand alerts are shown. Take a moment to look around this page to understand what information is shown to the user."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click the purple ",a.createElement(t.strong,null,"Add Alert")," button in the top right corner. Here you can see (again) that you can create an alert on one pipeline (DataStage job), multiple pipelines, data quality and more."),"\n",a.createElement(t.img,{src:"/1684146509570.2102862103/add-alert2.png",alt:"add alert2"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"You are going to create an alert to monitor for a schema change and set the receiver to be Slack. Click ",a.createElement(t.strong,null,"Set up")," in the ",a.createElement(t.strong,null,"Schema change")," tile."),"\n",a.createElement(t.img,{src:"/1684146509642.2124862123/schema-change.png",alt:"schema change"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"First, you have to specify your pipeline and create your alert definition. Click on the ",a.createElement(t.strong,null,"Source")," dropdown, type in the unique name you created earlier, and select the source that matches the one for your pipeline."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Your Multicloud Data Integration pipeline will appear; you can confirm it’s yours with the project name underneath it. Select it by clicking the checkbox on the left."),"\n",a.createElement(t.img,{src:"/1684146509662.213862128/source-pipeline.png",alt:"source pipeline"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"After selecting your specific job, select ",a.createElement(t.strong,null,"High")," as the severity in the ",a.createElement(t.strong,null,"Alert severity")," section."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click ",a.createElement(t.strong,null,"Save alert"),"."),"\n",a.createElement(t.img,{src:"/1684146509634.2122862121/save-schema-alert.png",alt:"save schema alert"}),"\n"),"\n"),"\n",a.createElement(t.p,null,"For this alert, you will set the receiver of the alert to be Slack."),"\n",a.createElement(t.p,null,"\x3c!-- TODO - need to create slack workspace for workshop and define receiver. Will need to come up with naming scheme to avoid stepping on later workshops --\x3e"),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"On the receivers page, click on the ",a.createElement(t.strong,null,"Show")," twistee to the right of Select receivers to open the ",a.createElement(t.strong,null,"Select receivers")," dropdown."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Select the ",a.createElement(t.strong,null,"Slack-alerts")," that is associated with the TODO - update ",a.createElement(t.strong,null,"#databand-demo-alerts")," Slack channel."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click ",a.createElement(t.strong,null,"Done")," to save the alert receiver settings."),"\n",a.createElement(t.p,null,a.createElement(t.img,{src:"/1684146509662.213862127/slack-receiver.png",alt:"slack receiver"}),"\n",a.createElement(t.strong,null,"NOTE:")," If you have not already joined the slack workspace for the workshop, do this now and join the TODO - update ",a.createElement(t.strong,null,"#databand-demo-alerts")," channel"),"\n"),"\n"),"\n",a.createElement(t.h2,{id:"detecting-datastage-schema-changes"},a.createElement(t.a,{href:"#detecting-datastage-schema-changes"},"Detecting DataStage Schema Changes")),"\n",a.createElement(t.p,null,"Now, switch back to your Cloud Pak for Data DataStage environment where you will purposefully introduce a schema change. This schema change will trigger your schema alert we just created in Databand."),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Double click on the Transformer stage to open its settings."),"\n",a.createElement(t.img,{src:"/1684146509578.2104862106/click-transformer.png",alt:"click transformer"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Select the ",a.createElement(t.strong,null,"Output")," tab."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click the ",a.createElement(t.strong,null,"Add column")," button on the right."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Name your new column ",a.createElement(t.strong,null,"RELIABILITY_SCORE"),". It will add the new column to the end of the ",a.createElement(t.strong,null,"Column name")," field."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Next, click the ",a.createElement(t.strong,null,"pencil")," icon in the ",a.createElement(t.strong,null,"Derivation")," column, then click the ",a.createElement(t.strong,null,"Calculator")," icon to edit the expression. In this field, use the sum of the ",a.createElement(t.strong,null,"YRS_AT_CURRENT_ADDRESS")," column and the ",a.createElement(t.strong,null,"YRS_WITH_CURRENT_EMPLOYER")," column."),"\n",a.createElement(t.img,{src:"/1684146509590.211862109/edit-derivation.png",alt:"edit derivation"}),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"To create this expression, locate the two columns under the ",a.createElement(t.strong,null,"Input columns")," twistee. Double click ",a.createElement(t.strong,null,"YRS_AT_CURRENT_ADDRESS"),", insert a plus symbol (+) and then double click ",a.createElement(t.strong,null,"YRS_WITH_CURRENT_EMPLOYER"),". Notice how the expression is populated to the ",a.createElement(t.strong,null,"Expression Builder")," window on the right. Your expression should look like the screenshot."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click ",a.createElement(t.strong,null,"Apply and return")," and then ",a.createElement(t.strong,null,"Save and return")," to save the changes you just made."),"\n",a.createElement(t.img,{src:"/1684146509574.2104862104/apply-derivation.png",alt:"apply derivation"}),"\n",a.createElement(t.p,null,"Run the job (click the run icon at the top) and wait for a few minutes until the job completes and the alert is triggered. When the alert is triggered, you will see a message in the TODO - update ",a.createElement(t.strong,null,"#databand-demo-alerts")," Slack channel similar to the screenshot below."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"Click on the ",a.createElement(t.strong,null,"HIGH Alert for a pipeline")," in the Slack message. This is the top message next to the ",a.createElement(t.strong,null,"orange circle")," icon. This opens the following screen. TODO - recapture"),"\n",a.createElement(t.img,{src:"/1684146509654.2126862126/slack-alert.png",alt:"slack alert"}),"\n"),"\n"),"\n",a.createElement(t.p,null,"Clicking on the link take you to Databand, where you can see the impact analysis of this alert. Specifically, you can see what schema changes happened in the Datastage job, what datasets were affected, and the pipelines (DataStage Jobs) that were affected. You can also see all this information graphically in the ",a.createElement(t.strong,null,"Lineage")," tab."),"\n",a.createElement(t.img,{src:"/1684146509638.2122862122/schema-alert.png",alt:"schema alert"}),"\n",a.createElement(t.p,null,"This alert was generated in near-real time as the pipeline was run. This is another important benefit of using Databand for observability. Being able to identify issues as the pipeline runs helps improve data quality quicker, instead of retroactive inspections and potentially missing issues for days, weeks, and even months."),"\n",a.createElement(t.h2,{id:"summary"},a.createElement(t.a,{href:"#summary"},"Summary")),"\n",a.createElement(t.p,null,"Congratulations on completing this lab! You gained hands-on experience in the following integration areas:"),"\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"Syncing DataStage/CP4DaaS to Databand"),"\n",a.createElement(t.li,null,"Observing the graphical representation of the DataStage job within Databand and the relevant information around this"),"\n",a.createElement(t.li,null,"Viewing dataset metrics and historical trends"),"\n",a.createElement(t.li,null,"Editing DataStage job inputs and outputs"),"\n",a.createElement(t.li,null,"Creating and setting up alerts for DataStage jobs in Databand"),"\n"),"\n",a.createElement(t.p,null,"This concludes the DataStage and Databand Hands on Lab. Please reach out to the VEST team or your IBM Partner contact with any questions, comments, concerns, or customer situations you run into."))}var o=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,l.ah)(),e.components);return t?a.createElement(t,e,a.createElement(r,e)):r(e)};var i=n(7315),s=n(2125),c=n(403),u=n(4690),m=n(4184),h=n.n(m);const g={table:c.y6,a:c.IW,blockquote:c.R4,SubHeader:c.bU,img:c.fb,code:c.dn,QuizAlert:c.SA},p=a.memo((function(e){let{children:t}=e;return a.createElement(l.Zo,{components:{...g}},t)})),d=e=>{const{data:{mdx:{tableOfContents:{items:t},frontmatter:{toc:n=!0}}},children:l}=e,r=(0,a.useRef)(null),{0:o,1:c}=(0,a.useState)("");(0,a.useEffect)((()=>{if(!r.current)return;const e=r.current.querySelectorAll("h2,h3,h4,h5"),t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&c(e.target.id)}))}),{rootMargin:"0px 0px -95% 0px",threshold:0});return e.forEach((e=>{t.observe(e)})),()=>t.disconnect()}),[]);const u=(null===n||n)&&t;return a.createElement(a.Fragment,null,a.createElement("article",{className:h()(i.Y,!u&&i.e),ref:r},a.createElement(p,null,l)),u&&a.createElement(s.Z,{itemsList:t,maxDepth:1,currSection:o}))},E=e=>{const{location:{pathname:t},data:{mdx:{frontmatter:{title:n},tableOfContents:{items:l}}}}=e;return a.createElement(u.Z,{pathname:t,title:n||l[0].title||void 0})};function f(e){return a.createElement(d,e,a.createElement(o,e))}}}]);
//# sourceMappingURL=component---src-pages-mdx-fields-slug-tsx-content-file-path-content-databand-102-md-73b45a9d5a497b06fb10.js.map